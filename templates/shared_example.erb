require 'spec_helper'

shared_examples_for '<%= examples_name %>' do |fact_set|
  describe "<%= class_name %> integrity" do
<% resources.each do |resource| %>
    it { is_expected.to contain_<%= resource[:type] %>('<%= resource[:name].to_s.gsub(/'/,"\'") %>').with({
<% resource.reject{|k,v|rejected_keys.include? k}.each do |attribute,value| -%>
      '<%= attribute.to_s %>' => '<%= value.to_s.gsub(/'/,"\'") %>',
<% end -%>
    })}
<% end %>
  end
end
