require 'spec_helper'

shared_examples_for '<%= examples_name %>' do |fact_set|
  describe "<%= class_name %> integrity" do
    <% resources.each do |resource| %>
    it { is_expected.to contain_<%= resource[:type] %>(<%= resource[:name].to_s.inspect %>).with({
      <% resource.reject{|k,v|rejected_keys.include? k}.each do |attribute,value| -%>
        <% if attribute.to_s !=  'before' and attribute.to_s != 'notify' and attribute.to_s != 'require' and attribute.to_s != 'subscribe' -%>
          <% if value.class == String -%>
      '<%= attribute.to_s %>' => <%= value.to_s.inspect %>,
          <% else -%>
      '<%= attribute.to_s %>' => <%= value %>,
          <% end -%>
        <% end -%>
      <% end -%>
    })}
    <% end %>
  end
end
